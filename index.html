<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CallistryÂ AI â€“ Smart Language Redirect</title>
  <meta name="description" content="CallistryÂ AI â€“ Unlimited AI voice agents for realâ€‘estate and service businesses. Choose Italian or English experience." />

  <!-- Hreflang declarations for SEO -->
  <link rel="alternate" hreflang="it" href="https://callistry.app/it/" />
  <link rel="alternate" hreflang="en-ae" href="https://callistry.app/uae/" />
  <link rel="alternate" hreflang="x-default" href="https://callistry.app/" />

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
        Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      margin: 0;
      padding: 0;
      background: #fafafa;
    }
    a {
      color: #0066ff;
      text-decoration: none;
      font-weight: 600;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>

  <script>
    // Detect if the visitor is a major crawler (Googlebot, Bingbot, etc.)
    const isBot = /googlebot|bingbot|baiduspider|yandexbot|duckduckbot|slurp/i.test(
      navigator.userAgent
    );

    if (!isBot) {
      (function () {
        const params = new URLSearchParams(window.location.search);
        const langOverride = params.get("lang");

        // Persist manual language choice
        if (langOverride) {
          localStorage.setItem("preferredLang", langOverride);
        }

        const savedLang = localStorage.getItem("preferredLang");
        if (savedLang === "it") {
          window.location.replace("/it");
          return;
        }
        if (savedLang === "uae") {
          window.location.replace("/uae");
          return;
        }

        // Autoâ€‘detect browser language
        const userLang = (navigator.language || navigator.userLanguage || "en").toLowerCase();
        if (userLang.startsWith("it")) {
          window.location.replace("/it");
        } else {
          // Default to English (UAE)
          window.location.replace("/uae");
        }
      })();
    }
  </script>
</head>
<body>
  <!-- Fallback / SEO content: hidden for humans, visible for crawlers -->
  <main id="fallback" style="max-width:600px;margin:80px auto;text-align:center;display:none;">
    <h1>CallistryÂ AI</h1>
    <p>Welcome! Select your preferred language:</p>
    <p>
      <a href="/it" lang="it">ðŸ‡®ðŸ‡¹Â Versione Italiana</a><br />
      <a href="/uae" lang="en">ðŸ‡¦ðŸ‡ªÂ English Version (UAE)</a>
    </p>
  </main>

  <!-- Noâ€‘script fallback for users with JS disabled -->
  <noscript>
    <div style="max-width:600px;margin:80px auto;text-align:center;">
      <h1>CallistryÂ AI</h1>
      <p>JavaScript is disabled. Please choose your language:</p>
      <a href="/it" lang="it">ðŸ‡®ðŸ‡¹Â VersioneÂ Italiana</a><br />
      <a href="/uae" lang="en">ðŸ‡¦ðŸ‡ªÂ EnglishÂ VersionÂ (UAE)</a>
    </div>
  </noscript>

  <script>
    // Reveal fallback only to bots (they don't execute redirects)
    if (isBot) {
      document.getElementById("fallback").style.display = "block";
    }
  </script>
</body>
</html>
